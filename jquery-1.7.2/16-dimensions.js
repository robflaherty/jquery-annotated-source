// **jQuery Annotated Source**.
//
// [Home](/jquery-annotated-source/) | [Previous Chapter](15-offset.html) | [Next Chapter](17-exports.html)

// ## Chapter 16: Dimensions

(function(jQuery) {

// Create width, height, innerHeight, innerWidth, outerHeight and outerWidth methods
   jQuery.each({ Height:"height", Width:"width" }, function(name, type) {
      var clientProp = "client" + name,
            scrollProp = "scroll" + name,
            offsetProp = "offset" + name;

      // innerHeight and innerWidth
      jQuery.fn[ "inner" + name ] = function() {
         var elem = this[0];
         return elem ?
               elem.style ?
                     parseFloat(jQuery.css(elem, type, "padding")) :
                     this[ type ]() :
               null;
      };

      // outerHeight and outerWidth
      jQuery.fn[ "outer" + name ] = function(margin) {
         var elem = this[0];
         return elem ?
               elem.style ?
                     parseFloat(jQuery.css(elem, type, margin ? "margin" : "border")) :
                     this[ type ]() :
               null;
      };

      jQuery.fn[ type ] = function(value) {
         return jQuery.access(this, function(elem, type, value) {
            var doc, docElemProp, orig, ret;

            if (jQuery.isWindow(elem)) {
               // 3rd condition allows Nokia support, as it supports the docElem prop but not CSS1Compat
               doc = elem.document;
               docElemProp = doc.documentElement[ clientProp ];
               return jQuery.support.boxModel && docElemProp ||
                     doc.body && doc.body[ clientProp ] || docElemProp;
            }

            // Get document width or height
            if (elem.nodeType === 9) {
               // Either scroll[Width/Height] or offset[Width/Height], whichever is greater
               doc = elem.documentElement;

               // when a window > document, IE6 reports a offset[Width/Height] > client[Width/Height]
               // so we can't use max, as it'll choose the incorrect offset[Width/Height]
               // instead we use the correct client[Width/Height]
               // support:IE6
               if (doc[ clientProp ] >= doc[ scrollProp ]) {
                  return doc[ clientProp ];
               }

               return Math.max(
                     elem.body[ scrollProp ], doc[ scrollProp ],
                     elem.body[ offsetProp ], doc[ offsetProp ]
               );
            }

            // Get width or height on the element
            if (value === undefined) {
               orig = jQuery.css(elem, type);
               ret = parseFloat(orig);
               return jQuery.isNumeric(ret) ? ret : orig;
            }

            // Set the width or height on the element
            jQuery(elem).css(type, value);
         }, type, value, arguments.length, null);
      };
   });

})(jQuery);
